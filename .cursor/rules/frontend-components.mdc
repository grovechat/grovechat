---
name: frontend-components
description: 前端组件规范
---

# UI 组件库（Reka UI）

**必须使用 Reka UI 组件库**，不要重复造轮子。

## 基本用法

```vue
<script setup lang="ts">
import { Button } from '@/components/ui/button';
import { 
  Dialog, 
  DialogContent, 
  DialogHeader, 
  DialogTitle 
} from '@/components/ui/dialog';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
</script>

<template>
  <Dialog>
    <DialogTrigger as-child>
      <Button variant="outline">打开对话框</Button>
    </DialogTrigger>
    <DialogContent>
      <DialogHeader>
        <DialogTitle>标题</DialogTitle>
      </DialogHeader>
      <!-- 内容 -->
    </DialogContent>
  </Dialog>
</template>
```

## 可用组件

位于 `resources/js/components/ui/`：

- **基础**: Button, Input, Label, Badge, Avatar
- **布局**: Card, Separator, Sidebar
- **反馈**: Dialog, Sheet, Toast, Alert, Skeleton
- **表单**: Select, Checkbox, InputOTP
- **导航**: Breadcrumb, NavigationMenu, DropdownMenu
- **其他**: Collapsible, Tooltip

# 图标（lucide-vue-next）

前端图标统一优先使用 `lucide-vue-next`，保持风格一致且便于按需引入。

## 使用方式

```vue
<script setup lang="ts">
import { Search, Trash2 } from 'lucide-vue-next';
</script>

<template>
  <button class="inline-flex items-center gap-2">
    <Search class="h-4 w-4" />
    搜索
  </button>

  <Trash2 class="h-4 w-4 text-destructive" />
</template>
```

## 约定

- ✅ **优先使用 lucide-vue-next**：除非产品明确要求品牌/特殊图标
- ✅ **尺寸用 Tailwind 类控制**：推荐 `h-4 w-4` / `h-5 w-5`
- ✅ **颜色跟随文本颜色**：通过父级 `text-*` 或图标自身 `text-*`

## 禁止事项

❌ **禁止随意引入多个图标库**（保持统一）  
❌ **禁止内联复制粘贴大量 SVG**（除非作为品牌图标且需复用）  

# 时间显示（多时区支持）

**必须使用 `formatDateTime()` 显示后端传入的时间**。

## 使用方式

```vue
<script setup lang="ts">
import { useDateTime } from '@/composables/useDateTime';

const { formatDateTime } = useDateTime();

// Props 包含后端返回的时间字符串
const props = defineProps<{
  createdAt: string;  // ISO 8601 格式
}>();
</script>

<template>
  <div>
    <!-- ✅ 使用 formatDateTime 自动转换为用户时区 -->
    <p>创建时间: {{ formatDateTime(props.createdAt) }}</p>
    
    <!-- ✅ 自定义格式 -->
    <p>日期: {{ formatDateTime(props.createdAt, 'YYYY-MM-DD') }}</p>
    
    <!-- ❌ 禁止直接显示原始时间 -->
    <p>{{ props.createdAt }}</p>
  </div>
</template>
```

## formatDateTime 特性

- 自动转换为用户选择的时区（通过 `useTimezone()`）
- 支持自定义格式（基于 dayjs）
- 自动适配多语言（中文/英文）

## 禁止事项

❌ **禁止直接显示后端时间** - 必须使用 `formatDateTime()`  
❌ **禁止自己实现 UI 组件** - 优先使用 Reka UI 组件库

# Props / defineProps 规范（尽量少拆包）

页面与组件在 `<script setup>` 中接收 Props 时，**优先直接使用 `props.xxx`**，尽量避免为了少打字而创建额外别名或 `computed` 包装（例如 `const userForm = computed(() => props.user_form)`）。

## 推荐写法

- ✅ **直接使用 `props`**：模板与逻辑中都用 `props.xxx` 访问。
- ✅ **仅对“派生状态”使用 computed**：比如拼接展示字段、过滤列表、分页计算等。
- ✅ **需要可变状态时用本地 ref**：当 UI 需要 `v-model` 或用户交互会改变值时，用本地 `ref`，并通过 `<input type="hidden" />` 参与表单提交。

## 反模式（避免）

- ❌ **无意义别名/拆包**：仅为了简写 `props.xxx` 而引入 `const xxx = computed(() => props.xxx)` 或解构出一堆变量。
- ❌ **直接修改 props**：`v-model="props.xxx"` 或对 `props` 赋值（props 在 Vue 中是只读的）。
